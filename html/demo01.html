<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<link rel="stylesheet" href="../css/bootstrap.min.css">
<body>
<div id="accordion" class=" container" role="tablist" aria-multiselectable="true">
    <div class="card">
        <div class="card-header" role="tab" id="headingOne">
            <h5 class="mb-0">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true"
                   aria-controls="collapseOne">
                    Demo#1
                </a>
            </h5>
        </div>

        <div id="collapseOne" class="collapse " role="tabpanel" aria-labelledby="headingOne">
            <div class="card-block" id="container1">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingTwo">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"
                   aria-expanded="false" aria-controls="collapseTwo">
                    Demo#2
                </a>
            </h5>
        </div>
        <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo">
            <div class="card-block" id="container2">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingThree">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree"
                   aria-expanded="false" aria-controls="collapseThree">
                    Demo#3
                </a>
            </h5>
        </div>
        <div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree">
            <div class="card-block" id="container3">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingFour">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour"
                   aria-expanded="false" aria-controls="collapseFour">
                    Demo#4
                </a>
            </h5>
        </div>
        <div id="collapseFour" class="collapse" role="tabpanel" aria-labelledby="headingFour">
            <div class="card-block" id="container4">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingFive">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFive"
                   aria-expanded="false" aria-controls="collapseFive">
                    Demo#5
                </a>
            </h5>
        </div>
        <div id="collapseFive" class="collapse" role="tabpanel" aria-labelledby="headingFive">
            <div class="card-block" id="container5">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingSix">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse " data-parent="#accordion" href="#collapseSix"
                   aria-expanded="false" aria-controls="collapseSix">
                    Demo#6
                </a>
            </h5>
        </div>
        <div id="collapseSix" class="collapse show" role="tabpanel" aria-labelledby="headingSix">
            <div class="card-block" id="container6">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingSeven">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseSeven"
                   aria-expanded="false" aria-controls="collapseSeven">
                    Demo#7
                </a>
            </h5>
        </div>
        <div id="collapseSeven" class="collapse" role="tabpanel" aria-labelledby="headingSeven">
            <div class="card-block" id="container7">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingEight">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseEight"
                   aria-expanded="false" aria-controls="collapseEight">
                    Demo#8
                </a>
            </h5>
        </div>
        <div id="collapseEight" class="collapse" role="tabpanel" aria-labelledby="headingEight">
            <div class="card-block" id="container8">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingNine">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseNine"
                   aria-expanded="false" aria-controls="collapseNine">
                    Demo#9
                </a>
            </h5>
        </div>
        <div id="collapseNine" class="collapse" role="tabpanel" aria-labelledby="headingNine">
            <div class="card-block" id="container9">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingTen">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTen"
                   aria-expanded="false" aria-controls="collapseTen">
                    Demo#10
                </a>
            </h5>
        </div>
        <div id="collapseTen" class="collapse" role="tabpanel" aria-labelledby="headingTen">
            <div class="card-block" id="container10">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingEle">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseEle"
                   aria-expanded="false" aria-controls="collapseEle">
                    Demo#11
                </a>
            </h5>
        </div>
        <div id="collapseEle" class="collapse" role="tabpanel" aria-labelledby="headingEle">
            <div class="card-block" id="container11">

            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingTwe">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwe"
                   aria-expanded="false" aria-controls="collapseTwe">
                    Demo#12
                </a>
            </h5>
        </div>
        <div id="collapseTwe" class="collapse" role="tabpanel" aria-labelledby="headingTwe">
            <div class="card-block" id="container12">

            </div>
        </div>
    </div>
</div>
</body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
        integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
        crossorigin="anonymous"></script>
<script src="../js/react.js"></script>
<script src="../js/react-dom.js"></script>
<script src="../js/browser.min.js"></script> <!-- 将 jsx翻译js 语法  应当放倒  服务器完成-->
<script type="text/babel">
    var names = ['Alcie', 'Bob', 'Kate']
    var arr = [
        <h3>Hello world</h3>,
        <h4>React is awesome</h4>
    ]
    var nameMap = names.map(function (name) {
        return 'hello ' + name
    })

    function showUser(user) {
        return user.firstName + ' ' + user.lastName + "\n"
    }

    var user = {
        firstName: 'zhenming',
        lastName: 'yang'
    }
    var HelloMessage = React.createClass({ // class component???? what a fuck  render twice
        //first render the compentent
        // second render the compentent to the dom object
        // first character must be captialized
        render: function () {
            return <h3> Hello {this.props.name}</h3>
        }
    })
    var NotesList = React.createClass({
        render: function () {
            return <ol>{
                React.Children.map(this.props.children, function (child) {
                    return <li>{child}</li>
                })
            }
            </ol>
        }
    })
    var MyTitle = React.createClass({
        // default prop of title
        getDefaultProps: function () {
            return {
                Title: "Mr",
                Name: "Boss",
                Age: 26
            }
        },
        // check the type of data
        propTypes: {
            Name: React.PropTypes.string.isRequired,
            Age: React.PropTypes.number.isRequired,
        },
        render: function () {
            return <h3>{this.props.Title} {this.props.Name}{this.props.Age}</h3>
        }
    })
    var MyComponent = React.createClass({
        handleClick: function () {
            this.refs.myTextInput.focus();

        },
        render: function () {
            return (
                <div>
                    <input type="text" ref="myTextInput"/>
                    <input type="button" value="Focus the text input" onClick={this.handleClick}/>
                </div>
            );

        }
    })
    var LikeButton = React.createClass({
        getInitialState: function () {
            console.log('init')
            return {liked: false}
        },
        handleClick: function () {
            this.setState({liked: !this.state.liked})
        },
        render: function () {
            var text = this.state.liked ? 'liked' : 'haven\t liked';
            return (
                <p onClick={this.handleClick}>
                    You {text} this. click to toggle
                </p>
            );
        }
    })

    var Input = React.createClass({
        getInitialState: function () {
            return {value: 'hello'}
        },
        handleChange: function (event) {
            this.setState({value: event.target.value})
        },
        render: function () {
            var value = this.state.value;
            return (
                /*this part have to be enclore tags so the div is necessary . That is sucks*/
                <div>
                    <input type="text" value={value} onChange={this.handleChange}/>
                    <p>{value}</p>
                </div>
            )
        }
    })
    var Hello=React.createClass({
        getInitialState:function(){
            return {
                opacity:1.0
            }
        },
        componentWillMount:function () {
            console.log('will render')
        },
        componentDidMount:function(){
            console.log('alreday render'),
            this.timer=setInterval(function(){
                var opacity=this.state.opacity;
                opacity-=.05
                if(opacity<0.1){
                    opacity=1.0
                }
                this.setState({
                    opacity:opacity
                })
            }.bind(this),100)
        },
        render:function(){
        return (
            /* when analysis the style use{{}}*/
            <div style={{opacity:this.state.opacity}}>
            Hello {this.props.name}
        </div>
        )
    }
    })
    var UserGist=React.createClass({
        getInitialState:function(){
            return {
                userName:"",
                lastGistUrl:""
            };
        },
        componentDidMount:function(){
        $.get(this.props.source,function(result){
            var lastGist=result[0]
            if(this.isMounted()){
                this.setState({
                    userName:lastGist.owner.login,
                    lastGistUrl:lastGist.html_url
                })
            }
        }.bind(this));
        },
        render:function(){
            return(
                <div>
                    {this.state.userName}'s last gist is <a href={this.state.lastGistUrl}>here</a>
                </div>
            )
        }
    })
    var RepoList=React.createClass({
        getInitialState:function(){
            return {loading:true, error:null,data:null}
        },
        componentDidMount(){
            /*????????*/
            this.props.promise.then(
                value => this.setState({loading:false,data:value}),
                error =>this.setState({loading:false,data:error})
            )
        },
        render:function () {
            if(this.state.loading){
                return <p>Loading...</p>
            }
         /*   if(this.state.error){*/
         if(this.state.error!=null){
                return <p>Error: {this.state.error.message}</p>
            }
            /*render the data*/
            else{
                var repos=this.state.data.items
                /* pack the items into a repoList to be rendered in List*/
                var repoList=repos.map(function(repo){
                    /*repo inside use it directly*/
                        return (
                            <li><a href={repo.html_url}>{repo.name}</a> ({repo.stargazers_count})  star</li>
                        )
                })

             return (
                 <main>
                     <h4>Most popular Javascript Projects in GitHub</h4>
                    <ol>{repoList}</ol>
                 </main>
             )
         }
        }
    })

    var element1 = React.createElement(
        'h1',
        {className: " alert alert-danger text-center"},
        showUser(user)
    )
    var element2 = React.createElement(
        'h3',
        {className: 'alert alert-info text-center'},
        nameMap
    )
    var element3 = React.createElement(
        'div',
        {className: "container text-center"},
        arr
    )
    ReactDOM.render(
        element1,
        document.getElementById('container1')
    )
    /*react dom render jsx*/
    ReactDOM.render(
        element2,
        document.getElementById('container2')
    );
    ReactDOM.render(
        element3,
        document.getElementById("container3")
    )
    /*react component*/
    ReactDOM.render(
        <HelloMessage name="zhenming" className='text-center'/>,
        document.getElementById('container4')
    )
    /*react.props.children*/
    ReactDOM.render(
        <NotesList>
            <span class="text-center">hello</span>
            <span>world</span>
        </NotesList>,
        document.getElementById('container5')
    )
    /*react prop types*/

    ReactDOM.render(
        <MyTitle Name={user.firstName}/>,
        document.getElementById('container6')
    )
    /*DOM diff and virtual DOM*/
    ReactDOM.render(
        <MyComponent/>,
        document.getElementById('container7')
    )
    ReactDOM.render(
        <LikeButton/>,
        document.getElementById('container8')
    )
    /*form*/
    ReactDOM.render(
        <Input/>,
        document.getElementById('container9')
    )
    /*lifecycle for each componment*/
    ReactDOM.render(
        <Hello name="zhenming"/>,
        document.getElementById('container10')
    )
    /*about ajax jsonp*/
    ReactDOM.render(
        <UserGist source="https://api.github.com/users/octocat/gists"/>,
        document.getElementById('container11')
    )
    /* promise component */
    ReactDOM.render(
        <RepoList  promise={$.getJSON('https://api.github.com/search/repositories?q=javascript&sort=stars')}/>,
        document.getElementById("container12")
    )
</script>

</html>